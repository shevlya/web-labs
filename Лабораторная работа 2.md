# Лабораторная работа №2

## База данных
Установите PostgresSQL. При установке PostgresSQL запомните пароль и выберите английскую локаль чтобы избежать дальнейших проблем. 

Создайте базу данных taskdb. Создайте таблицу task, соответствующую сущности задачи. Идентификатор должен быть автогенерируемым на уровне базы данных.

## Обновление зависимостей
Добавьте в файл pom.xml две новые зависимости:
- `postgresql`;
- `spring-boot-starter-jdbc`.

## Конфигурация подключения к базе данных
Создайте и заполните конфигурационный файл `application.properties`. Запишите в него параметры подключения к вашей базе данных.

## JDBC слой доступа к данным

Создайте класс `TaskJdbcRepository`, реализующий интерфейс `TaskRepository` из ЛР №1.
Требования:
- использовать `JdbcTemplate` или `NamedParameterJdbcTemplate`;
- запрещено использовать ORM (Hibernate, JPA);
- запрещено использовать Spring Data JDBC.

## Переключение реализаций
Реализуйте переключение между JDBC / InMemory реализациями репозитория при помощи [профилей](https://www.theserverside.com/blog/Coffee-Talk-Java-News-Stories-and-Opinions/active-spring-boot-profile-annotation-yaml-application-properties-yml-dev-prod-uat-qa-java).

## Слой бизнес-логики

Создайте класс `TaskService`, который будет отвечать за делегирование методов доступа к данным репозиторию.
В слое сервисов в методах работы с задачами необходимо реализовать следующие бизнес-правила:
1) пользователь не может иметь более 10 активных задач одновременно (статусы `OPEN` и `IN_PROGRESS`);
2) нельзя удалять задачи, созданные менее 5 минут назад.

## Контрольные вопросы
1) В чём преимущества хранения данных в реляционной БД по сравнению с in-memory структурами? Какие недостатки?
2) Как получить автосгенерированный ID после INSERT операции?
3) В чём разница между аннотациями @Component, @Service, @Repository, @Controller?
4) Принцип внедрения зависимостей. Принцип инверсии управления.
5) Разделение приложения на слои Repository/Service/Controller. Какова ответственность каждого слоя?
6) Различия между JdbcTemplate / NamedParameterJdbcTemplate.
7) Зачем была подключена зависимость postgresql?
8) Технология JDBC.
9) SQL-Injection атака и способы борьбы с ней.
